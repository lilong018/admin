<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="zh">
<head>
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>
    <meta charset="utf-8"/>
    <title>菜单列表</title>

    <meta name="description" content="Static &amp; Dynamic Tables"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0"/>

    <!-- bootstrap & fontawesome -->
    <link rel="stylesheet" href="assets/css/bootstrap.min.css"/>
    <link rel="stylesheet" href="assets/font-awesome/4.5.0/css/font-awesome.min.css"/>

    <!-- page specific plugin styles -->

    <!-- text fonts -->
    <link rel="stylesheet" href="assets/css/fonts.googleapis.com.css"/>

    <!-- ace styles -->
    <link rel="stylesheet" href="assets/css/ace.min.css" class="ace-main-stylesheet" id="main-ace-style"/>

    <!--[if lte IE 9]>
    <link rel="stylesheet" href="assets/css/ace-part2.min.css" class="ace-main-stylesheet"/>
    <![endif]-->
    <link rel="stylesheet" href="assets/css/ace-skins.min.css"/>
    <link rel="stylesheet" href="assets/css/ace-rtl.min.css"/>
    <link rel="stylesheet" href="assets/layui/css/layui.css"/>

    <!--[if lte IE 9]>
    <link rel="stylesheet" href="assets/css/ace-ie.min.css"/>
    <![endif]-->

    <!-- inline styles related to this page -->

    <!-- ace settings handler -->
    <script src="assets/js/ace-extra.min.js"></script>

    <!-- HTML5shiv and Respond.js for IE8 to support HTML5 elements and media queries -->

    <!--[if lte IE 8]>
    <script src="assets/js/html5shiv.min.js"></script>
    <script src="assets/js/respond.min.js"></script>
    <![endif]-->
</head>

<body class="no-skin">


<script type="text/javascript">
    try {
        ace.settings.loadState('main-container')
    } catch (e) {
    }

    function addUser() {
        location.href = "/add";
    }
</script>

<div class="main-content">
    <div class="main-content-inner">
        <div class="breadcrumbs ace-save-state" id="breadcrumbs">
            <div class="btn-group-sm hidden-xs" id="toolbar" role="group">
                <a class="btn btn-success" href="javascript:void(0)" onclick="add()">
                    <i class="fa fa-plus"></i> 新增
                </a>
                <a class="btn btn-danger btn-del disabled" onclick="$.operate.removeAll()">
                    <i class="fa fa-remove"></i> 删除
                </a>
            </div>
            <div class="nav-search" id="nav-search">
                <form class="form-search">
                                <span class="input-icon">
                                    <input type="text" placeholder="Search ..." class="nav-search-input"
                                           id="nav-search-input" autocomplete="off"/>
                                    <i class="ace-icon fa fa-search nav-search-icon"></i>
                                </span>
                </form>
            </div><!-- /.nav-search -->
        </div>
        <div class="page-content">
            <div class="row">
                <div class="col-xs-12">
                    <!-- PAGE CONTENT BEGINS -->
                    <div class="row">
                        <div class="col-xs-12">
                            <table id="simple-table" class="table  table-bordered table-hover">
                                <thead>
                                <tr>
                                    <th class="bs-checkbox " style="width: 36px; " data-field="0" tabindex="0">
                                        <div class="th-inner "><input name="btSelectAll" type="checkbox"></div>
                                        <div class="fht-cell"></div>
                                    </th>
                                    <th>用户ID</th>
                                    <th>登录名称</th>
                                    <th>用户名称</th>
                                    <th>手机</th>
                                    <th class="hidden-480">状态</th>
                                    <th class="hidden-480">创建时间</th>
                                    <th class="hidden-480">操作</th>
                                </tr>
                                </thead>

                                <tbody>
                                <!--<tr data-th-each="user : ${list}">-->
                                <!--/*@thymesVar id="list" type="list"*/-->
                                <tr th:each="user:${list}">
                                    <td class="bs-checkbox "><input data-index="0" name="btSelectItem" type="checkbox"></td>
                                    <td th:text="${user.userId}"></td>
                                    <td th:text="${user.loginName}"></td>
                                    <td th:text="${user.userName}"></td>
                                    <td th:text="${user.phonenumber}"></td>
                                    <td th:text="${user.status==0} ? '正常' : '停用'"></td>
                                    <td th:text="${#calendars.format(user.createTime,'yyyy-MM-dd HH:mm:ss')}"></td>
                                    <td>
                                        <div class="hidden-sm hidden-xs btn-group">

                                            <button class="btn btn-xs btn-info" th:onclick="'editUser('+${user.userId}+')'">
                                                <i class="ace-icon fa fa-pencil bigger-120"></i>
                                            </button>

                                            <button class="btn btn-xs btn-danger"
                                                    th:onclick="'delUser('+${user.userId}+')'">
                                                <i class="ace-icon fa fa-trash-o bigger-120"></i>
                                            </button>

                                        </div>
                                    </td>
                                </tr>
                                </tbody>
                            </table>
                        </div><!-- /.span -->
                    </div><!-- /.row -->
                    <div th:utext="${page}"></div>
                    <!-- PAGE CONTENT ENDS -->
                </div><!-- /.col -->
            </div><!-- /.row -->
        </div><!-- /.page-content -->
    </div>
</div><!-- /.main-content -->

<a href="#" id="btn-scroll-up" class="btn-scroll-up btn btn-sm btn-inverse">
    <i class="ace-icon fa fa-angle-double-up icon-only bigger-110"></i>
</a>
</div><!-- /.main-container -->

<!-- basic scripts -->

<!--[if !IE]> -->
<script src="assets/js/jquery-2.1.4.min.js"></script>

<!-- <![endif]-->

<!--[if IE]>
<script src="assets/js/jquery-1.11.3.min.js"></script>
<![endif]-->
<script type="text/javascript">
    if ('ontouchstart' in document.documentElement) document.write("<script src='assets/js/jquery.mobile.custom.min.js'>" + "<" + "/script>");
</script>
<script src="assets/js/bootstrap.min.js"></script>

<!-- page specific plugin scripts -->
<script src="assets/js/jquery.dataTables.min.js"></script>
<script src="assets/js/jquery.dataTables.bootstrap.min.js"></script>
<script src="assets/js/dataTables.buttons.min.js"></script>
<script src="assets/js/buttons.flash.min.js"></script>
<script src="assets/js/buttons.html5.min.js"></script>
<script src="assets/js/buttons.print.min.js"></script>
<script src="assets/js/buttons.colVis.min.js"></script>
<script src="assets/js/dataTables.select.min.js"></script>
<script src="assets/layer/layer.js"></script>

<!-- ace scripts -->
<script src="assets/js/ace-elements.min.js"></script>
<script src="assets/js/ace.min.js"></script>

<script type="text/javascript" src="assets/layui/layui.js"></script>

<!-- inline scripts related to this page -->
<script th:inline="javascript">
    jQuery(function ($) {
        //initiate dataTables plugin
        var myTable =
            $('#dynamic-table')
                .DataTable({
                    bAutoWidth: false,
                    "aoColumns": [
                        {"bSortable": false},
                        null, null, null, null, null,
                        {"bSortable": false}
                    ],
                    "aaSorting": [],
                });


    })

    function add() {
        layer.open({
            type: 2,
            maxmin: true,
            shade: 0.3,
            title: "添加用户",
            fix: false,
            area: ['800px', '600px'],
            content:  "/user/add",
            shadeClose: true,
            btn: ['<i class="fa fa-check"></i> 确认', '<i class="fa fa-close"></i> 关闭'],
            yes: function (index, layero) {
                let iframeWin = layero.find('iframe')[0];
                iframeWin.contentWindow.submitHandler();
            }, cancel: function () {
                return true;
            }
        });
    }


    //用户新增
    function addUser() {
        var index = layer.open({
                title: "用户新增",
                type: 2,
                area: ['800px', '500px'],
                shadeClose: true, //点击遮罩关闭
                content: '/user/user',
                fix: true
            }
        );
    }

    //用户修改
    function editUser(userId) {
        var index = layer.open({
                title: "用户修改",
                type: 2,
                area: ['800px', '500px'],
                shadeClose: true, //点击遮罩关闭
                content: '/user/edit?userId=' + userId,
                fix: true
            }
        );
    }

    //用户删除
    function delUser(userId) {
        layer.confirm("确认删除吗？", {
                btn: ['确定', '取消']//按钮
            }, function (index) {
                $.ajax({
                    url: '/user/remove?userId=' + userId,
                    type: 'DELETE',
                    dataType: 'json',
                    data: $(".form-horizontal").serialize(),
                    async: false,
                    success: function (data) {
                        if (data != null && true == data.succeed) {
                            layer.msg("删除成功", {time: 1000}, function () {
                                window.location.reload()
                                layer.close();
                            })
                        } else {
                            layer.msg(data.msg);
                        }
                    }
                })
            }
        )
    }
</script>
</body>
</html>
